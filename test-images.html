<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Images Test</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .property-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .property-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background: white;
        }
        .property-image {
            width: 100%;
            height: 200px;
            background-size: cover;
            background-position: center;
        }
        .property-details {
            padding: 15px;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üè† Property Images Test</h1>
        
        <div class="test-section">
            <h2>Mock Data Images (Realistic Property Photos)</h2>
            <p>These images are generated based on property type and location:</p>
            <div id="mockProperties" class="property-grid"></div>
        </div>

        <div class="test-section">
            <h2>API Data Images (When Available)</h2>
            <p>These would be real images from the Repliers API:</p>
            <div id="apiProperties" class="property-grid"></div>
        </div>

        <div class="test-section">
            <h2>Image Generation Test</h2>
            <button id="generateTest" class="btn cta">Generate Test Properties</button>
            <div id="generatedProperties" class="property-grid"></div>
        </div>
    </div>

    <script src="js/property-api.js"></script>
    <script>
        // Test mock data images
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const mockData = window.propertyAPI.getMockFeaturedProperties(6);
                displayProperties(mockData.listings, 'mockProperties');
                
                // Test API (will likely fall back to mock data)
                try {
                    const apiData = await window.propertyAPI.getFeaturedProperties(3);
                    displayProperties(apiData.listings, 'apiProperties');
                } catch (error) {
                    document.getElementById('apiProperties').innerHTML = 
                        '<p>API not available (CORS issue) - using mock data instead</p>';
                    const mockData2 = window.propertyAPI.getMockFeaturedProperties(3);
                    displayProperties(mockData2.listings, 'apiProperties');
                }
                
            } catch (error) {
                console.error('Error loading test data:', error);
            }
        });

        // Test image generation
        document.getElementById('generateTest').addEventListener('click', () => {
            const cities = ['Newport Beach', 'Laguna Beach', 'Irvine', 'Costa Mesa'];
            const types = ['Single Family', 'Condo', 'Townhouse'];
            
            const testProperties = [];
            for (let i = 0; i < 8; i++) {
                const city = cities[Math.floor(Math.random() * cities.length)];
                const type = types[Math.floor(Math.random() * types.length)];
                
                testProperties.push({
                    mlsNumber: `TEST${i + 1}`,
                    address: `${Math.floor(Math.random() * 9999) + 1} Test St, ${city}, CA`,
                    city: city,
                    propertyType: type,
                    price: Math.floor(Math.random() * 2000000) + 500000,
                    beds: Math.floor(Math.random() * 4) + 1,
                    baths: Math.floor(Math.random() * 3) + 1,
                    sqft: Math.floor(Math.random() * 2000) + 1000,
                    images: window.propertyAPI.generatePropertyImages(city, type, i)
                });
            }
            
            displayProperties(testProperties, 'generatedProperties');
        });

        function displayProperties(properties, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            properties.forEach(property => {
                const formatted = window.propertyAPI.formatPropertyForUI(property);
                const card = document.createElement('div');
                card.className = 'property-card';
                card.innerHTML = `
                    <div class="property-image" style="background-image: url('${formatted.image}')"></div>
                    <div class="property-details">
                        <h3>${formatted.address}</h3>
                        <p><strong>${formatted.price}</strong></p>
                        <p>${formatted.beds} bed ‚Ä¢ ${formatted.baths} bath ‚Ä¢ ${formatted.sqft}</p>
                        <p><strong>Type:</strong> ${formatted.propertyType}</p>
                        <p><strong>City:</strong> ${formatted.city}</p>
                        <p><strong>Images:</strong> ${formatted.images.length} available</p>
                        <details>
                            <summary>View all images</summary>
                            ${formatted.images.map(img => `<img src="${img}" style="width: 100px; height: 75px; object-fit: cover; margin: 5px; border-radius: 4px;">`).join('')}
                        </details>
                    </div>
                `;
                container.appendChild(card);
            });
        }
    </script>
</body>
</html>


